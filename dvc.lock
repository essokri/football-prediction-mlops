schema: '2.0'
stages:
  fetch_data:
    cmd: python src/fetch_data_universal.py
    deps:
    - path: src/fetch_data_universal.py
      hash: md5
      md5: 839dbe3734760ee90b1830e17b54b2fd
      size: 5451
    outs:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: cb4f8590a6fc504c305ab79686b03320
      size: 3141171
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: cb4f8590a6fc504c305ab79686b03320
      size: 3141171
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
    - path: src/preprocess.py
      hash: md5
      md5: ded8e97a55ed0857d5c6d5eccb95214d
      size: 3185
    outs:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
    - path: src/train.py
      hash: md5
      md5: 5fd1ca86841de0ba6546543efccd842b
      size: 3497
    outs:
    - path: app/models/away_model.json
      hash: md5
      md5: a26e456318de9ae5832919fec5ba822e
      size: 336227
    - path: app/models/home_model.json
      hash: md5
      md5: e730e3dcc6191a8a2eb1beb562879f5f
      size: 338569
  predict:
    cmd: python src/predict.py
    deps:
    - path: app/models/away_model.json
      hash: md5
      md5: a26e456318de9ae5832919fec5ba822e
      size: 336227
    - path: app/models/home_model.json
      hash: md5
      md5: e730e3dcc6191a8a2eb1beb562879f5f
      size: 338569
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
    - path: src/predict.py
      hash: md5
      md5: b54548e2dcc4fdb3f0993ca26742db8f
      size: 3112
    outs:
    - path: data/predictions/predicted_matches.csv
      hash: md5
      md5: 60b4d47a75a6b5154474c4c812f1a767
      size: 12928212
  preprocess_model1:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: cb4f8590a6fc504c305ab79686b03320
      size: 3141171
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
    - path: src/preprocess.py
      hash: md5
      md5: ded8e97a55ed0857d5c6d5eccb95214d
      size: 3185
    outs:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
  preprocess_model2:
    cmd: python src/preprocess_model2.py
    deps:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: 979567df55a9eeaee26a3776682dabab
      size: 1372856
    - path: data/raw/schedule_model2.csv
      hash: md5
      md5: f9c69424429e2bf401f5d20469be5749
      size: 832005
    - path: data/team_name_mapping.csv
      hash: md5
      md5: 1d332bc89bb3c15cb9c3f972d8098793
      size: 3056
    - path: src/preprocess_model2.py
      hash: md5
      md5: 6565c74d5ef99803a69d7ebbcb24b0d3
      size: 6147
    outs:
    - path: data/processed/model2_preprocessed.csv
      hash: md5
      md5: 89051b054dcd153f891c05e6359ae6fd
      size: 1343162
  train_model2:
    cmd: python src/train_model2.py
    deps:
    - path: data/processed/model2_preprocessed.csv
      hash: md5
      md5: 89051b054dcd153f891c05e6359ae6fd
      size: 1343162
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: daa0f9abc28e218a7d6bb6a65e1d9cc0
      size: 2239574
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
    - path: src/train_model2.py
      hash: md5
      md5: 4c64c6ee63bf6c23281b9e7bb46ed479
      size: 4885
    outs:
    - path: data/processed/model2_training_dataset.csv
      hash: md5
      md5: 953ca7d6b15b5947d26cabac3b97625d
      size: 365189480
    - path: models/model2_xgb.json
      hash: md5
      md5: de82fa2e5d0e70feaee0b944abef139d
      size: 7114507
  predict_model2:
    cmd: python src/predict_model2.py
    deps:
    - path: data/processed/model2_training_dataset.csv
      hash: md5
      md5: 953ca7d6b15b5947d26cabac3b97625d
      size: 365189480
    - path: models/model2_xgb.json
      hash: md5
      md5: de82fa2e5d0e70feaee0b944abef139d
      size: 7114507
    - path: src/predict_model2.py
      hash: md5
      md5: 40602c05fbd7504841b06ff78ca67272
      size: 4211
    outs:
    - path: data/predictions/model2_predictions.csv
      hash: md5
      md5: 1286083ae0d89757e09b33d120f1ad41
      size: 136
  predict_model3_players:
    cmd: python src/predict_model2_players.py
    deps:
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 61d47f82d24a8135d97efa48362b0a10
      size: 409517
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: daa0f9abc28e218a7d6bb6a65e1d9cc0
      size: 2239574
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
    - path: models/model2_xgb.json
      hash: md5
      md5: de82fa2e5d0e70feaee0b944abef139d
      size: 7114507
    - path: src/predict_model2_players.py
      hash: md5
      md5: 91eb21b60ebf57ae2a31c8ae4cb811c2
      size: 5634
    outs:
    - path: data/predictions/model3_players_output.csv
      hash: md5
      md5: c450fbbccee550e131638dc1c41b0ec5
      size: 222
  data_drift:
    cmd: python src/monitor_drift.py
    deps:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
    - path: src/monitor_drift.py
      hash: md5
      md5: 374b3d869e14012907d8deb545483dd3
      size: 4250
    outs:
    - path: reports/simple_data_drift_report.csv
      hash: md5
      md5: f253816af59d3302496e46b7efc9db90
      size: 861
    - path: reports/simple_data_drift_report.html
      hash: md5
      md5: d62642e7f7ffb8821146aaa576dad35d
      size: 3516
