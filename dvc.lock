schema: '2.0'
stages:
  fetch_data:
    cmd: python src/fetch_data_universal.py
    deps:
    - path: src/fetch_data_universal.py
      hash: md5
      md5: 839dbe3734760ee90b1830e17b54b2fd
      size: 5451
    outs:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: cb4f8590a6fc504c305ab79686b03320
      size: 3141171
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: cb4f8590a6fc504c305ab79686b03320
      size: 3141171
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
    - path: src/preprocess.py
      hash: md5
      md5: ded8e97a55ed0857d5c6d5eccb95214d
      size: 3185
    outs:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
  train:
    cmd: python src/train.py
    deps:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
    - path: src/train.py
      hash: md5
      md5: 5fd1ca86841de0ba6546543efccd842b
      size: 3497
    outs:
    - path: app/models/away_model.json
      hash: md5
      md5: a26e456318de9ae5832919fec5ba822e
      size: 336227
    - path: app/models/home_model.json
      hash: md5
      md5: e730e3dcc6191a8a2eb1beb562879f5f
      size: 338569
  predict:
    cmd: python src/predict.py
    deps:
    - path: app/models/away_model.json
      hash: md5
      md5: a26e456318de9ae5832919fec5ba822e
      size: 336227
    - path: app/models/home_model.json
      hash: md5
      md5: e730e3dcc6191a8a2eb1beb562879f5f
      size: 338569
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
    - path: src/predict.py
      hash: md5
      md5: 20fb092271fccd9f35803181b32d1063
      size: 3116
    outs:
    - path: data/predictions/predicted_matches.csv
      hash: md5
      md5: 60b4d47a75a6b5154474c4c812f1a767
      size: 12928212
  preprocess_model1:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw/schedule_multi_leagues.csv
      hash: md5
      md5: cb4f8590a6fc504c305ab79686b03320
      size: 3141171
    - path: data/raw/team_stats_multi_leagues.csv
      hash: md5
      md5: f34c9f96be1224c335a54f13f6f929f1
      size: 205023
    - path: src/preprocess.py
      hash: md5
      md5: ded8e97a55ed0857d5c6d5eccb95214d
      size: 3185
    outs:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
  preprocess_model2:
    cmd: python src/preprocess_model2.py
    deps:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: 979567df55a9eeaee26a3776682dabab
      size: 1372856
    - path: data/raw/schedule_model2.csv
      hash: md5
      md5: d81bae3a6915e2848547a29964b4e691
      size: 837197
    - path: data/team_name_mapping.csv
      hash: md5
      md5: 1d332bc89bb3c15cb9c3f972d8098793
      size: 3056
    - path: src/preprocess_model2.py
      hash: md5
      md5: 6565c74d5ef99803a69d7ebbcb24b0d3
      size: 6147
    outs:
    - path: data/processed/model2_preprocessed.csv
      hash: md5
      md5: c03dc419786d5d07fff8a82d910c9a6d
      size: 1348901
  train_model2:
    cmd: python src/train_model2.py
    deps:
    - path: data/processed/model2_preprocessed.csv
      hash: md5
      md5: c03dc419786d5d07fff8a82d910c9a6d
      size: 1348901
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 01c582d4da6c3bbba0c8cfe2b70f9e39
      size: 2261729
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: c0425b801d652fde9c3927e7a7e123b2
      size: 53934
    - path: src/train_model2.py
      hash: md5
      md5: 4c64c6ee63bf6c23281b9e7bb46ed479
      size: 4885
    outs:
    - path: data/processed/model2_training_dataset.csv
      hash: md5
      md5: 2db0614eeb466def48bfd85c36ca3c30
      size: 369336897
    - path: models/model2_xgb.json
      hash: md5
      md5: d340a151aad9f2fe8aafc27853612d22
      size: 7129739
  predict_model2:
    cmd: python src/predict_model2.py
    deps:
    - path: data/processed/model2_training_dataset.csv
      hash: md5
      md5: 2db0614eeb466def48bfd85c36ca3c30
      size: 369336897
    - path: models/model2_xgb.json
      hash: md5
      md5: d340a151aad9f2fe8aafc27853612d22
      size: 7129739
    - path: src/predict_model2.py
      hash: md5
      md5: 40602c05fbd7504841b06ff78ca67272
      size: 4211
    outs:
    - path: data/predictions/model2_predictions.csv
      hash: md5
      md5: 4436740f868adfb3c4949c4fb6c0835f
      size: 150
  predict_model3_players:
    cmd: python src/predict_model2_players.py
    deps:
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 61d47f82d24a8135d97efa48362b0a10
      size: 409517
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 01c582d4da6c3bbba0c8cfe2b70f9e39
      size: 2261729
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: c0425b801d652fde9c3927e7a7e123b2
      size: 53934
    - path: models/model2_xgb.json
      hash: md5
      md5: d340a151aad9f2fe8aafc27853612d22
      size: 7129739
    - path: src/predict_model2_players.py
      hash: md5
      md5: 91eb21b60ebf57ae2a31c8ae4cb811c2
      size: 5634
    outs:
    - path: data/predictions/model3_players_output.csv
      hash: md5
      md5: 01700ea929df4bca832753c74b2421c4
      size: 222
  data_drift:
    cmd: python src/monitor_drift.py
    deps:
    - path: data/processed/clean_matches.csv
      hash: md5
      md5: 1391a5b21fbaaafbe64166feadc7e3fc
      size: 11343280
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 61d47f82d24a8135d97efa48362b0a10
      size: 409517
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 01c582d4da6c3bbba0c8cfe2b70f9e39
      size: 2261729
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: c0425b801d652fde9c3927e7a7e123b2
      size: 53934
    - path: src/monitor_drift.py
      hash: md5
      md5: 837458d5cb8443f34de6b77d04590248
      size: 5105
    outs:
    - path: reports/
      hash: md5
      md5: 14e0a87ab099c09c144fefb3eb9d79d8.dir
      size: 7347
      nfiles: 8
  extract_matches_model2:
    cmd: python -m src.data_extraction.extract_matches
    deps:
    - path: src/data_extraction/extract_matches.py
      hash: md5
      md5: b6fb9d092b924e05a1be1b6e9650689c
      size: 500
    outs:
    - path: data/raw/schedule_model2.csv
      hash: md5
      md5: d81bae3a6915e2848547a29964b4e691
      size: 837197
  extract_player_stats_model2:
    cmd: python -m src.data_extraction.extract_player_stats
    deps:
    - path: src/data_extraction/extract_player_stats.py
      hash: md5
      md5: 906faa8a10ace9a30758bb44b7c40d64
      size: 909
    outs:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: 979567df55a9eeaee26a3776682dabab
      size: 1372856
  extract_team_stats_model2:
    cmd: python -m src.data_extraction.extract_team_stats
    deps:
    - path: src/data_extraction/extract_team_stats.py
      hash: md5
      md5: f572f1b0477a890dd7cdb40b527e39aa
      size: 610
    outs:
    - path: data/raw/team_match_stats_model2.csv
      hash: md5
      md5: 01c582d4da6c3bbba0c8cfe2b70f9e39
      size: 2261729
    - path: data/raw/team_season_stats_model2.csv
      hash: md5
      md5: c0425b801d652fde9c3927e7a7e123b2
      size: 53934
  build_player_strengths:
    cmd: python src/build_player_strengths.py
    deps:
    - path: data/raw/player_season_stats_model2.csv
      hash: md5
      md5: 979567df55a9eeaee26a3776682dabab
      size: 1372856
    - path: src/build_player_strengths.py
      hash: md5
      md5: 82f4fb3fe2f1288acae2d626d27b1706
      size: 1424
    outs:
    - path: data/processed/player_strengths.csv
      hash: md5
      md5: 61d47f82d24a8135d97efa48362b0a10
      size: 409517
